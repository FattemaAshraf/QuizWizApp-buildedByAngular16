"use strict";(self.webpackChunkQuiz=self.webpackChunkQuiz||[]).push([[663],{663:(O,_,u)=>{u.r(_),u.d(_,{StudentsModule:()=>Y});var a=u(6814),f=u(4581),t=u(5879),p=u(9347),c=u(8792);let v=(()=>{class i{constructor(e,o){this.dialogRef=e,this.StudentsService=o}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.so),t.Y36(c.q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-student"]],decls:22,vars:0,consts:[["id","addgroup"],[1,"container"],[1,"row"],[1,"title","d-flex","justify-content-between"],[1,"p-3"],[1,"icon"],[1,"fa-solid","fa-check","fa-1x","p-4"],[3,"click"],[1,"fa-solid","fa-xmark","fa-1x","p-4"],[1,"gap-5","p-5"],[1,"col-md-12"],[1,"input-group","input-group-lg","mb-3"],["id","inputGroup-sizing-lg",1,"input-group-text","bg"],["type","text","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-lg",1,"form-control","form-control-sm"],[1,"col-md-12","py-4"],[1,"input-group","input-group-lg"],["type","tel","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-lg",1,"form-control","form-control-sm"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"h5",4),t._uU(6,"Add Student"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"i",6),t.TgZ(9,"a",7),t.NdJ("click",function(){return n.onNoClick()}),t._UZ(10,"i",8),t.qZA()()()(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),t._uU(15,"Name"),t.qZA(),t._UZ(16,"input",13),t.qZA()(),t.TgZ(17,"div",14)(18,"div",15)(19,"span",12),t._uU(20,"Phone"),t.qZA(),t._UZ(21,"input",16),t.qZA()()()()()())}})}return i})();var Z=u(8693),d=u(6223),g=u(2425),m=u(4010);function G(i,l){if(1&i&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function T(i,l){1&i&&(t.TgZ(0,"div",19)(1,"p"),t._uU(2,"Group is required"),t.qZA()())}let S=(()=>{class i{constructor(e,o,n,s,r){this.dialogRef=e,this.data=o,this._Toastr=n,this._GroupService=s,this._StudentsService=r,this.allGroups=[],this.studentId="",this.addForm=new d.cw({group:new d.NI(null,[d.kI.required])}),this.studentId=o._id}ngOnInit(){this.getAllGroups()}getAllGroups(){this._GroupService.getAllGroups().subscribe({next:e=>{console.log(e),this.allGroups=e}})}onSubmit(e){console.log(e.value.group),this._StudentsService.addStudentToGroup(this.studentId,e.value.group).subscribe({next:o=>{console.log(o)},error:o=>{this._Toastr.error(o.error.message)},complete:()=>{this._Toastr.success("Added to Group Succesfully"),this.onNoClick()}})}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.so),t.Y36(p.WI),t.Y36(g._W),t.Y36(m.l),t.Y36(c.q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-to-group"]],decls:25,vars:6,consts:[["id","set-up"],[1,"container"],[1,"d-flex","justify-content-between"],[1,"mt-3"],[1,"truefalse"],[3,"click"],[1,"fa-solid","fa-check"],[3,"mat-dialog-close","click"],[1,"fa-solid","fa-x"],[1,"my-3","pe-3",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"col-md-12","py-4"],[1,"input-group","input-group-lg"],["id","inputGroup-sizing-lg",1,"input-group-text","bg"],["id","inputGroupSelect01","formControlName","group",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["class","alert alert-danger mt-2",4,"ngIf"],[3,"value"],[1,"alert","alert-danger","mt-2"]],template:function(o,n){if(1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Add to Group"),t.qZA()(),t.TgZ(6,"div",4)(7,"div")(8,"a",5),t.NdJ("click",function(){return n.onSubmit(n.addForm)}),t._UZ(9,"i",6),t.qZA()(),t.TgZ(10,"div")(11,"a",7),t.NdJ("click",function(){return n.onNoClick()}),t._UZ(12,"i",8),t.qZA()()()(),t.TgZ(13,"form",9)(14,"div",10)(15,"div",11)(16,"h3"),t._uU(17),t.qZA()(),t.TgZ(18,"div",12)(19,"div",13)(20,"span",14),t._uU(21,"Groups"),t.qZA(),t.TgZ(22,"select",15),t.YNc(23,G,2,2,"option",16),t.qZA()(),t.YNc(24,T,3,0,"div",17),t.qZA()()()()()),2&o){let s;t.xp6(11),t.Q6J("mat-dialog-close",n.data),t.xp6(2),t.Q6J("formGroup",n.addForm),t.xp6(4),t.AsE("Name:",n.data.first_name," ",n.data.last_name,""),t.xp6(6),t.Q6J("ngForOf",n.allGroups),t.xp6(1),t.Q6J("ngIf",(null==(s=n.addForm.get("group"))?null:s.touched)&&"INVALID"==(null==(s=n.addForm.get("group"))?null:s.status))}},dependencies:[a.sg,a.O5,d._Y,d.YN,d.Kr,d.EJ,d.JJ,d.JL,d.sg,d.u,p.ZT]})}return i})();function A(i,l){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function x(i,l){1&i&&(t.TgZ(0,"div",18)(1,"p",19),t._uU(2," Group is required"),t.qZA()())}let C=(()=>{class i{constructor(e,o,n,s,r){this.dialogRef=e,this.data=o,this._GroupService=n,this._StudentsService=s,this._Tostar=r,this.Groupdata=[],this.updateGroupForm=new d.cw({groupId:new d.NI([""],[d.kI.required])}),console.log(o)}ngOnInit(){this.onGetAllGroups()}onGetAllGroups(){this._GroupService.getAllGroups().subscribe({next:e=>{console.log(e),this.Groupdata=e}})}onSubmit(){this._StudentsService.updateStudentGroup(this.data._id,this.updateGroupForm.value.groupId).subscribe({next:n=>{console.log(n),this._Tostar.success("Updated Succesfully")},error:n=>{this._Tostar.error(n.error.message)},complete:()=>{this.onNoClick()}})}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.so),t.Y36(p.WI),t.Y36(m.l),t.Y36(c.q),t.Y36(g._W))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-group"]],decls:22,vars:4,consts:[["id","set-up"],[1,"container"],[1,"d-flex","justify-content-between"],[1,"mt-3"],[1,"truefalse"],[3,"click"],[1,"fa-solid","fa-check"],[3,"mat-dialog-close","click"],[1,"fa-solid","fa-x"],[1,"my-3","pe-3",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"input-group","input-group-default","mb-3"],["id","inputGroup-sizing-default",1,"input-group-text","bg"],["id","inputGroupSelect01","formControlName","groupId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["class","alert alert-danger py-1",4,"ngIf"],[3,"value"],[1,"alert","alert-danger","py-1"],[1,"mb-0"]],template:function(o,n){if(1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Update student group"),t.qZA()(),t.TgZ(6,"div",4)(7,"div")(8,"a",5),t.NdJ("click",function(){return n.onSubmit()}),t._UZ(9,"i",6),t.qZA()(),t.TgZ(10,"div")(11,"a",7),t.NdJ("click",function(){return n.onNoClick()}),t._UZ(12,"i",8),t.qZA()()()(),t.TgZ(13,"form",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"span",13),t._uU(18," Group Name:"),t.qZA(),t.TgZ(19,"select",14),t.YNc(20,A,2,2,"option",15),t.qZA()(),t.YNc(21,x,3,0,"div",16),t.qZA()()()()()),2&o){let s;t.xp6(11),t.Q6J("mat-dialog-close",n.data),t.xp6(2),t.Q6J("formGroup",n.updateGroupForm),t.xp6(7),t.Q6J("ngForOf",n.Groupdata),t.xp6(1),t.Q6J("ngIf",(null==(s=n.updateGroupForm.get("groupId"))?null:s.touched)&&"INVALID"==(null==(s=n.updateGroupForm.get("groupId"))?null:s.status))}},dependencies:[a.sg,a.O5,d._Y,d.YN,d.Kr,d.EJ,d.JJ,d.JL,d.sg,d.u,p.ZT]})}return i})();var h=u(4104);function b(i,l){if(1&i&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.group.name)}}function q(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",5)(3,"div",13),t._UZ(4,"img",14),t.qZA(),t.TgZ(5,"div",15)(6,"div")(7,"h5"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.YNc(11,b,2,1,"span",16),t.qZA(),t.TgZ(12,"div",17)(13,"a",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDeleteStudentDialog(s,!1,r.notDeletedGroup))}),t._UZ(14,"i",19),t.qZA()()()()()()}if(2&i){const e=l.$implicit;t.xp6(8),t.AsE(" ",e.first_name," ",e.last_name," "),t.xp6(2),t.Oqu(e.email),t.xp6(1),t.Q6J("ngIf",e.group)}}function U(i,l){1&i&&(t.TgZ(0,"div",21),t._uU(1," This is a warning No Data Found. "),t.qZA())}function N(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",5)(3,"div",13),t._UZ(4,"img",14),t.qZA(),t.TgZ(5,"div",15)(6,"div")(7,"h5"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"span",20),t._uU(12),t.qZA()(),t.TgZ(13,"div",17)(14,"a",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDeleteStudentDialog(s,!1,r.notDeletedGroup))}),t._UZ(15,"i",19),t.qZA(),t.TgZ(16,"a",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openAddToGroupDialogue(s))}),t._UZ(17,"i",23),t.qZA()()()()()()}if(2&i){const e=l.$implicit;t.xp6(8),t.AsE(" ",e.first_name," ",e.last_name," "),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.status)}}function F(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"a",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.getGroupById(s._id))}),t._uU(1),t.qZA()}if(2&i){const e=l.$implicit,o=t.oxw();t.Q6J("ngClass",e._id==(null==o.groupData?null:o.groupData._id)?"btn-sec-active":" btn-secondry"),t.xp6(1),t.Oqu(e.name)}}function I(i,l){1&i&&(t.TgZ(0,"div",21),t._uU(1," This is a warning No Data Found - please select or add group. "),t.qZA())}function y(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",5)(3,"div",13),t._UZ(4,"img",14),t.qZA(),t.TgZ(5,"div",15)(6,"div")(7,"h5"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"div",17)(12,"a",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openDeleteStudentDialog(s,!0,r.groupData))}),t._UZ(13,"i",19),t.qZA(),t.TgZ(14,"a",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.openUpdateGroupDialog(s))}),t._UZ(15,"i",25),t.qZA()()()()()()}if(2&i){const e=l.$implicit;t.xp6(8),t.AsE(" ",e.first_name," ",e.last_name," "),t.xp6(2),t.Oqu(e.email)}}const J=[{path:"",component:(()=>{class i{constructor(e,o,n,s){this.dialog=e,this._StudentService=o,this._GroupService=n,this._Toastr=s,this.studentswithoutGroup=[],this.allGroups=[],this.studentsGroupName=[],this.recentId=""}ngOnInit(){this.getAllStudents(),this.getAllStudentsWithoutGroup(),this.getAllGroups()}getAllStudents(){this._StudentService.getAllStudents().subscribe({next:e=>{console.log(e),this.allStudents=e}})}getAllStudentsWithoutGroup(){this._StudentService.getAllStudentsWithoutGroup().subscribe({next:e=>{console.log(e),this.studentswithoutGroup=e}})}getAllGroups(){this._GroupService.getAllGroups().subscribe({next:e=>{console.log(e),this.allGroups=e},error:e=>{this._Toastr.error(e.error.message)},complete:()=>{}})}getStudentById(e){this._StudentService.getStudentById(e).subscribe({next:o=>{console.log(o),this.studentName=o},error:o=>{},complete:()=>{}})}getGroupById(e){this.recentId=e,this._GroupService.getGroupbyId(e).subscribe({next:o=>{console.log(o),this.groupData=o,this.studentsGroupName=this.groupData.students,console.log(this.studentsGroupName)},error:o=>{this._Toastr.error(o.error.message)},complete:()=>{}})}openUpdateGroupDialog(e){this.dialog.open(C,{data:e,width:"40%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),console.log(n),this.getGroupById(this.recentId)})}openAddToGroupDialogue(e){this.dialog.open(S,{data:e,width:"40%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),console.log(n),this.getAllStudentsWithoutGroup()})}openAddDialogue(){this.dialog.open(v,{data:{},width:"40%"}).afterClosed().subscribe(o=>{console.log("The dialog was closed"),console.log(o)})}openDeleteStudentDialog(e,o,n){this.dialog.open(Z.F,{data:{data:e,deleteFromGroup:o,groupData:n,name:e?.first_name},width:"40%"}).afterClosed().subscribe(r=>{console.log("The dialog was closed"),console.log(r),r&&(1==r.deleteFromGroup?this.deleteStudentFromGroup(r.data._id,r.groupData._id):this.deleteStudent(r.data._id),this.getAllStudents())})}deleteStudent(e){this._StudentService.deleteStudent(e).subscribe({next:o=>{console.log(o)},error:o=>{this._Toastr.error(o.error.message)},complete:()=>{this._Toastr.success("Record deleted successfully")}})}deleteStudentFromGroup(e,o){this._StudentService.deleteStudentFromGroup(e,o).subscribe({next:n=>{console.log(n)},error:n=>{this._Toastr.error(n.error.message)},complete:()=>{this._Toastr.success("Record deleted From Group successfully")}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.uw),t.Y36(c.q),t.Y36(m.l),t.Y36(g._W))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-students"]],decls:22,vars:6,consts:[["id","students-instr"],[1,"container"],[1,"card-students"],[1,"student-header"],["label","All Students"],[1,"row"],["class","col-md-6",4,"ngFor","ngForOf"],["label","Students Without Group"],["class","alert alert-warning my-3","role","alert",4,"ngIf"],["label","Groups"],["class"," mx-3 rounded-btn",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"student-card"],[1,"col-md-3"],["src","assets/images/Avatar-Profile-Vector-PNG-Pic.png","alt","",1,"h-100"],[1,"col-md-9","p-0"],["class","span-succes",4,"ngIf"],[1,"pe-4","fs-4"],[1,"pe-1",3,"click"],[1,"fa-solid","fa-trash",2,"color","red"],[1,"span-succes"],["role","alert",1,"alert","alert-warning","my-3"],[3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"mx-3","rounded-btn",3,"ngClass","click"],[1,"fa-solid","fa-pen-to-square"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-tab-group")(5,"mat-tab",4)(6,"div",1)(7,"div",5),t.YNc(8,q,15,4,"div",6),t.qZA()()(),t.TgZ(9,"mat-tab",7)(10,"div",1)(11,"div",5),t.YNc(12,U,2,0,"div",8),t.YNc(13,N,18,4,"div",6),t.qZA()()(),t.TgZ(14,"mat-tab",9)(15,"div",1)(16,"div",5)(17,"div",3),t.YNc(18,F,2,2,"a",10),t.qZA(),t.YNc(19,I,2,0,"div",8),t.TgZ(20,"div",5),t.YNc(21,y,16,3,"div",6),t.qZA()()()()()()()()()),2&o&&(t.xp6(8),t.Q6J("ngForOf",n.allStudents),t.xp6(4),t.Q6J("ngIf",0==n.studentsGroupName.length),t.xp6(1),t.Q6J("ngForOf",n.studentswithoutGroup),t.xp6(5),t.Q6J("ngForOf",n.allGroups),t.xp6(1),t.Q6J("ngIf",0==n.studentsGroupName.length),t.xp6(2),t.Q6J("ngForOf",n.studentsGroupName))},dependencies:[a.mk,a.sg,a.O5,h.uX,h.SP],styles:["ol[_ngcontent-%COMP%]{padding-left:20px}li[_ngcontent-%COMP%]{color:#4f4f4f;padding-left:10px;margin-top:24px;position:relative;font-size:16px;line-height:20px}.mdc-tab__text-label[_ngcontent-%COMP%]{font-weight:600}"]})}return i})()}];let k=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(J),f.Bz]})}return i})();var w=u(7825);let Y=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[a.ez,k,w.m]})}return i})()}}]);